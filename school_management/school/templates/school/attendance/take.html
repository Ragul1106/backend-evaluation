{% extends 'base.html' %} {% block content %}

<h4>Take Attendance</h4>
<form method="post">
  {% csrf_token %}
  <div class="row g-2">
    <div class="col-auto">
      <input class="form-control" type="date" name="date" required />
    </div>
    <div class="col-auto">
      <select class="form-select" name="subject" required>
        {% for s in subjects %}
        <option value="{{ s.id }}">{{ s.code }} - {{ s.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-auto">
      <select class="form-select" name="classroom" required>
        {% for c in classrooms %}
        <option value="{{ c.id }}">{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <hr />
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Roll</th>
        <th>Name</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for st in classrooms.first.students.all %}
      <tr>
        <td>{{ st.roll_no }}</td>
        <td>{{ st.user.get_full_name }}</td>
        <td>
          <select class="form-select" name="status_{{ st.id }}">
            <option value="P">Present</option>
            <option value="A">Absent</option>
          </select>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <button class="btn btn-primary">Save</button>
</form>
{% endblock %}
